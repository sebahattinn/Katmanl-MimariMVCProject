@model OnlineGallery.Models.Artwork

<div class="container mt-4">
    <h3>Sanat Eserini Sil</h3>
    <p>Bu sanat eserini silmek istediğinizden emin misiniz?</p>

    <div class="mb-3">
        <label class="form-label">Eser Adı:</label>
        <p>@Model.Title</p>
    </div>
    <div class="mb-3">
        <label class="form-label">Açıklama:</label>
        <p>@Model.Description</p>
    </div>
    <div class="mb-3">
        <label class="form-label">Fiyat:</label>
        <p>@Model.Price.ToString("C")</p>
    </div>
    <div class="mb-3">
        <label class="form-label">Kategori ID:</label>
        <p>@Model.CategoryId</p>
    </div>
    <div class="mb-3">
        <label class="form-label">Resim URL:</label>
        <p>@Model.ImageUrl</p>
    </div>

    <div>
        <input type="hidden" id="artworkTitle" value="@Model.Title" />
        <button onclick="deleteArtwork()" class="btn btn-danger">Sil</button>
        <a href="javascript:history.back()" class="btn btn-secondary">İptal</a>
    </div>
</div>

<script>
    function deleteArtwork() {
        const title = document.getElementById('artworkTitle').value;
        console.log(`Sending title: ${title}`); // Log the title being sent

        fetch('@Url.Action("DeleteArtworkByTitle", "Admin")', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify(title)
        })
        .then(response => response.json())
        .then(data => {
            if (data.success) {
                alert('Sanat eseri başarıyla silindi.');
                // Sayfayı yeniden yükleyebilir veya UI'yi güncelleyebilirsiniz
                window.location.href = '@Url.Action("Index", "Admin")'; // Admin sayfasına yönlendir
            } else {
                alert(data.message);
            }
        })
        .catch(error => console.error('Error:', error));
    }
</script>
