@model OnlineGallery.Models.Artwork

<div class="container mt-4">
    <h3>Sanat Eserini Sil</h3>
    <p>Bu sanat eserini silmek istediğinizden emin misiniz?</p>

    <div class="mb-3">
        <label class="form-label">Eser Adı:</label>
        <p>@Model.Title</p>
    </div>
    <div class="mb-3">
        <label class="form-label">Açıklama:</label>
        <p>@Model.Description</p>
    </div>
    <div class="mb-3">
        <label class="form-label">Fiyat:</label>
        <p>@Model.Price.ToString("C")</p>
    </div>
    <div class="mb-3">
        <label class="form-label">Kategori ID:</label>
        <p>@Model.CategoryId</p>
    </div>
    <div class="mb-3">
        <label class="form-label">Resim URL:</label>
        <p>@Model.ImageUrl</p>
    </div>

    <div>
        <!-- ID'yi gizli alıyoruz -->
        <input type="hidden" id="artworkId" value="@Model?.ArtworkId ?? 0" />
        <button id="delete-artwork-button" class="btn btn-danger">Sil</button>
        <a href="javascript:history.back()" class="btn btn-secondary">İptal</a>
    </div>
</div>

<script>
    document.getElementById("delete-artwork-button").addEventListener("click", function () {
        const id = document.getElementById("artworkId").value;

        console.log("Artwork ID:", id); // Loglama ekleyin

        if (!id) {
            alert("Geçersiz ID!");
            return;
        }

        fetch('@Url.Action("DeleteArtworkById", "Admin")', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(id)
        })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    alert("Sanat eseri başarıyla silindi!");
                    window.location.href = '@Url.Action("Index", "Admin")';
                } else {
                    alert(data.message);
                }
            })
            .catch(error => console.error("Error:", error));
    });
</script>
